<!DOCTYPE html>
	<head>
		<title>Architecture</title>
		<style>
			* {
				font-family: Arial;
			}

			.container {
				border: 3px solid #88abb8;
				border-radius: 20px;
				width: 500px;
				text-align: center;
				padding: 20px;
				margin: 30px;
				position: absolute;
				background: #ddf3fa;
				background-image: url('https://upload.wikimedia.org/wikipedia/commons/4/4e/Docker_%28container_engine%29_logo.svg');
				background-size: 60px;
				background-repeat: no-repeat;
				background-position: 5px 5px;
			}

			.file {
				border: 5px solid #000;
				height: 70px;
				width: 70px;
				position: absolute;
				font-size: 28px;
				font-family: monospace;
				font-weight: bold;
				padding-top: 30px;
				border-radius: 0px 20px 0px 0px;
			}

			.filedent {
				border-left: 5px solid #000;
				border-bottom: 5px solid #000;
				width: 10px;
				height: 10px;
				position: absolute;
				margin-top: -30px;
				margin-left: 55px;
			}

			.inner {
				margin-top: 20px;
				background: #eee;
				height: 90px;
				padding: 5px;
				padding-top: 10px;
				border: 3px solid #ccc;
				background-size: 60px;
				background-repeat: no-repeat;
				background-position: 5px 5px;
			}

			.half {
				width: 200px;
			}

			.container h2 {
				font-size: 22px;
				margin: 0px;
				line-height: 1.0;
				font-weight: normal;
				margin-bottom: 10px;
			}

			img {
				width: 60px;
				margin-top: 40px;
			}

			.elipse {
				background: linear-gradient(91deg, #aeaeae, #ffffff);
				width: 150px;
				height: 20px;
				border-radius: 75px / 10px;
				border: 1px solid;
				margin: auto;
			}

			.bottom {
				background: #aaa;
			}

			.rectangle {
				background: linear-gradient(91deg, #aeaeae, #ffffff);
				width: 150px;
				height: 150px;
				margin: auto;
				margin-top: -10px;
				margin-bottom: -10px;
				border-right: 1px solid;
				border-left: 1px solid;
			}

			.text {
				background: #eee;
				padding: 10px;
				position: absolute;
				margin-top: 385px;
				margin-left: 190px;
				width: 246px;
				font-size: 10pt;
			}

			li {
				margin-bottom: 10px;
				margin-left: 0px;
			}

			ol {
				padding-left: 20px;
			}

			.project {
				position: absolute;
				height: 350px;
				width: 280px;
				margin-left: 180px;
				margin-top: 0px;
				border: 2px dashed #b96a00;
				background: #fffcf8;
				padding: 3px;
				color: #b96a00;
				font-weight: bold;
				z-index: -1;
			}

			.compose {
				position: absolute;
				height: 675px;
				width: 885px;
				margin-left: 525px;
				margin-top: 0px;
				padding: 3px;
				border: 2px dashed green;
				color: green;
				font-weight: bold;
				background: #f5fff5;
			}

			.arrow {
				position: absolute;
				z-index: 1000;
			}

			.filetextsmall {
				font-size: 10pt;
				display: block;
				margin-left: 3px;
			}

			.port {
				font-family: monospace;
				font-weight: bold;
				font-size: 15pt;
			}
		</style>
	</head>
	<body>
		<div style="margin-left: 50px; margin-top: 50px;" class="file">
			<div class="filedent"></div>
			.VCF
		</div>
		<div style="margin-left: 50px; margin-top: 200px; background: lightgreen" class="file">
			<div class="filedent"></div>
			.VCF<span class="filetextsmall">annotated</span>
		</div>		
		<div class="project">vcfimport docker container</div>
		<div class="compose">docker-compose</div>
		<div class="container half" style="margin-left: 200px;">
			<div class="inner external">
				<h2>VEP Ensembl.org</h2>
				Annotating the plain VCF file
			</div>
			<div class="inner">
				<h2>Importer (Java)</h2>
				Importing and preprocessing the VCF
			</div>
		</div>	
		<div style="margin-left: 550px; margin-top: 400px;" class="container">
			<h2>Core (Spring)</h2>
			Managing user access, performing DB queries and caching results
		</div>
		<div style="margin-left: 1150px; margin-top: 363px;" class="container half">
			<h2>Web (React.JS)</h2>
			Provinding a interface to users, accessible through a web browser 
		</div>		
		<div class="container" style="margin-left: 550px; margin-top: 560px; width: 800px;">
			<h2>NGINX</h2>
			Routing calls to Web and /api calls to Core 
		</div>				
		<div style="margin-left: 850px;" class="container half">
			<h2>MySQL</h2>
			Containing userdata and configurations<br/><br/>
			<div class="elipse">
			</div>
			<div class="rectangle">
				<img src="https://upload.wikimedia.org/wikipedia/de/thumb/d/dd/MySQL_logo.svg/1600px-MySQL_logo.svg.png?20190217224241" />
			</div>
			<div class="elipse bottom">
			</div>
		</div>
		<div style="margin-left: 550px;" class="container half">
			<h2>Postgresql</h2>
			Containing patient samples<br/><br/><br/>
			<div class="elipse">
			</div>
			<div class="rectangle">
				<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/29/Postgresql_elephant.svg/1080px-Postgresql_elephant.svg.png?20080116191800" />
			</div>
			<div class="elipse bottom">
			</div>
		</div>
		<img style="margin-left: 650px; margin-top: 340px;" class="arrow" src="https://upload.wikimedia.org/wikipedia/commons/e/e0/Arrow_head_down.svg" /> <!-- postgres to core -->
		<img style="margin-left: 750px; margin-top: 500px;" class="arrow" src="https://upload.wikimedia.org/wikipedia/commons/e/e0/Arrow_head_down.svg" /> <!-- core to nginx -->		
		<img style="margin-left: 825px; margin-top: 500px;" class="arrow" src="https://upload.wikimedia.org/wikipedia/commons/b/b5/Arrow_head_up.svg" /> <!-- nginx to core -->		


		<img style="margin-left: 1210px; margin-top: 500px;" class="arrow" src="https://upload.wikimedia.org/wikipedia/commons/e/e0/Arrow_head_down.svg" /> <!-- nginx to web -->		
		<img style="margin-left: 1280px; margin-top: 500px;" class="arrow" src="https://upload.wikimedia.org/wikipedia/commons/b/b5/Arrow_head_up.svg" /> <!-- web to nginx -->		

		<img style="margin-left: 900px; margin-top: 340px;" class="arrow" src="https://upload.wikimedia.org/wikipedia/commons/e/e0/Arrow_head_down.svg" /> <!-- mysql -->		
		<img style="margin-left: 975px; margin-top: 340px;" class="arrow" src="https://upload.wikimedia.org/wikipedia/commons/b/b5/Arrow_head_up.svg" /> <!-- mysql -->	

		<img style="margin-left: 145px; margin-top: 220px;" class="arrow" src="https://upload.wikimedia.org/wikipedia/commons/e/e9/Arrow_head_right.svg" /> <!-- to import -->

		<img style="margin-left: 460px; margin-top: 220px;" class="arrow" src="https://upload.wikimedia.org/wikipedia/commons/e/e9/Arrow_head_right.svg" /> <!-- to post -->

		<img style="margin-left: 145px; margin-top: 70px;" class="arrow" src="https://upload.wikimedia.org/wikipedia/commons/e/e9/Arrow_head_right.svg" /> <!-- to vep -->		

		<img style="margin-left: 145px; margin-top: 150px; transform: rotate(135deg);" class="arrow" src="https://upload.wikimedia.org/wikipedia/commons/e/e9/Arrow_head_right.svg" /> <!-- from vep to import -->	

		<img style="margin-left: 925px; margin-top: 750px; width: 100px;" class="arrow" src="https://upload.wikimedia.org/wikipedia/commons/3/3d/ILF_User_Management.png" />

		<img style="margin-left: 910px; margin-top: 690px;" class="arrow" src="https://upload.wikimedia.org/wikipedia/commons/e/e0/Arrow_head_down.svg" /> <!-- nginx to user -->		
		<img style="margin-left: 980px; margin-top: 690px;" class="arrow" src="https://upload.wikimedia.org/wikipedia/commons/b/b5/Arrow_head_up.svg" /> <!-- user to nginx -->		

		<div class="arrow port" style="margin-left: 950px; margin-top: 660px;">:80</div>
		<div class="arrow port" style="margin-left: 475px; margin-top: 220px;">:10938</div>

		<div class="text">
			<ol>
				<li>A VCF file is annotated by running a vep command in the vcfimport docker container</li>
				<li>The annotated VCF is imported into the Postgresql DB via a custom importer in the vcfimport docker container</li>
				<li>The data in the VCF can now be accessed and filtered via a web browser</li>
			</ol>
		</div>
	</body>
</html>